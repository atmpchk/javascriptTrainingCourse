(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda74d5a"],{"13d5":function(t,a,e){"use strict";var i=e("23e7"),n=e("d58f").left,o=e("a640"),r=e("ae40"),s=o("reduce"),c=r("reduce",{1:0});i({target:"Array",proto:!0,forced:!s||!c},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"48af":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"cart"}},[e("loading",{attrs:{active:t.isLoading,"is-full-page":t.isFullPageLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"container mb-5"},[e("div",{staticClass:"mt-3"},[e("h3",{staticClass:"mt-3 mb-4"},[t._v("購物清單")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.cart,(function(a,i){return e("tr",{key:a.product.id,staticClass:"border-bottom",class:{"border-top":0===i}},[e("th",{staticClass:"border-0 px-0 font-weight-normal py-4",attrs:{scope:"row"}},[e("img",{staticStyle:{width:"72px",height:"72px","object-fit":"cover"},attrs:{src:a.product.imageUrl[0],alt:""}}),e("p",{staticClass:"mb-0 font-weight-bold ml-3 d-inline-block"},[t._v(" "+t._s(a.product.title)+" ")])]),e("td",{staticClass:"border-0 align-middle",staticStyle:{"max-width":"160px"}},[e("div",{staticClass:"input-group pr-5"},[e("div",{staticClass:"input-group-prepend"},[e("button",{staticClass:"btn btn-outline-dark border-0 py-2",attrs:{type:"button",id:"button-addon1"},on:{click:function(e){return t.minusItemQuantity(a)}}},[e("i",{staticClass:"fas fa-minus"})])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control border-0 text-center my-auto shadow-none bg-white",attrs:{type:"text",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",readonly:""},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-dark border-0 py-2",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.addItemQuantity(a)}}},[e("i",{staticClass:"fas fa-plus"})])])])]),e("td",{staticClass:"border-0 align-middle"},[e("p",{staticClass:"mb-0 ml-auto"},[t._v(" "+t._s(t._f("formatCurrency")(a.product.price))+" ")])]),e("td",{staticClass:"border-0 align-middle"},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.deleteItem(a)}}},[e("i",{staticClass:"fas fa-times"})])])])})),0)]),t._m(1)]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"border p-4 mb-4"},[e("h4",{staticClass:"font-weight-bold mb-4"},[t._v("訂單試算")]),e("table",{staticClass:"table text-muted border-bottom"},[e("tbody",[e("tr",[e("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v("小計")]),e("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v(" "+t._s(t._f("formatCurrency")(t.priceSummary))+" ")])]),e("tr",[e("th",{staticClass:"border-0 px-0 pt-0 pb-4 font-weight-normal align-middle",attrs:{scope:"row"}},[t._v(" 付款方式 ")]),e("td",{staticClass:"text-right border-0 px-0 pt-0 pb-4"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.payment,expression:"payment"}],staticClass:"text-right form-control rounded-0 my-auto shadow-none bg-white",attrs:{id:"payment"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.payment=a.target.multiple?e:e[0]},t.updatePayment]}},t._l(t.paymentMethods,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})),0)])])])]),e("div",{staticClass:"d-flex justify-content-between mt-4"},[e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v(t._s(t._f("formatCurrency")(t.priceSummary)))])]),e("router-link",{staticClass:"btn btn-dark btn-block mt-4",attrs:{to:"/checkOut"}},[t._v("訂單確定")])],1)])])])])],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"border-0 pl-0",attrs:{scope:"col"}},[t._v("產品")]),e("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("數量")]),e("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("單價")]),e("th",{staticClass:"border-0",attrs:{scope:"col"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-group w-50"},[e("input",{staticClass:"form-control rounded-0\n                border-bottom border-top-0 border-left-0 border-right-0 shadow-none",attrs:{type:"text",placeholder:"折扣代碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-dark\n                  border-bottom border-top-0 border-left-0 border-right-0 rounded-0",attrs:{type:"button",id:"button-addon2"}},[e("i",{staticClass:"fas fa-paper-plane"})])])])}],o=(e("99af"),e("13d5"),e("ac1f"),e("5319"),{data:function(){return{apiInfo:{forCart:"/ec/shopping"},cart:[],isLoading:!1,isFullPageLoading:!0,pagination:{},paymentMethods:["WebATM","ATM","CVS","Barcode","Credit","ApplePay","GooglePay"],payment:"Credit",payemntExpired:2592e6}},computed:{priceSummary:function(){return this.cart.reduce((function(t,a){return t+a.product.price*a.quantity}),0)}},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchoolPayment\s*=\s*([^;]*).*$)|^.*$/,"$1");t&&(this.payment=t)},mounted:function(){this.getCart()},methods:{givePage:function(t){return t||(this.pagination.current_page||1)},getCart:function(t){var a=this;this.isLoading=!0,this.axios.get("".concat(this.apiInfo.forCart,"?page=").concat(this.givePage(t))).then((function(t){a.cart=t.data.data,a.pagination=t.data.meta.pagination,0===a.cart.length&&a.$router.replace("/"),a.isLoading=!1})).catch((function(t){a.isLoading=!1,console.log(t)}))},addItemQuantity:function(t){return t.quantity<10&&this.editItemQuantity(t,1)},minusItemQuantity:function(t){return t.quantity>1&&this.editItemQuantity(t,-1)},editItemQuantity:function(t,a){var e=this;this.isLoading=!0,this.axios.patch(this.apiInfo.forCart,{product:t.product.id,quantity:t.quantity+a}).then((function(){e.$bus.$emit("addProductToCart",{id:t.product.id,quantity:a}),e.isLoading=!1,e.getCart()})).catch((function(t){e.isLoading=!1,console.log(t)}))},deleteItem:function(t){var a=this;this.isLoading=!0,this.axios.delete("".concat(this.apiInfo.forCart,"/").concat(t.product.id)).then((function(){a.isLoading=!1,a.$bus.$emit("removeProductFromCart",t.product.id),a.getCart()})).catch((function(t){a.isLoading=!1,console.log(t)}))},setLoading:function(t){this.isLoading=t},updatePayment:function(){document.cookie="hexSchoolPayment=".concat(this.payment,";expires=").concat(new Date(Date.now()+this.payemntExpired),"; path=/")}}}),r=o,s=e("2877"),c=Object(s["a"])(r,i,n,!1,null,null,null);a["default"]=c.exports},d58f:function(t,a,e){var i=e("1c0b"),n=e("7b0b"),o=e("44ad"),r=e("50c4"),s=function(t){return function(a,e,s,c){i(e);var d=n(a),l=o(d),u=r(d.length),p=t?u-1:0,m=t?-1:1;if(s<2)while(1){if(p in l){c=l[p],p+=m;break}if(p+=m,t?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:u>p;p+=m)p in l&&(c=e(c,l[p],p,d));return c}};t.exports={left:s(!1),right:s(!0)}}}]);
//# sourceMappingURL=chunk-fda74d5a.cfdc9dec.js.map