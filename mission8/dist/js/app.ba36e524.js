(function(t){function n(n){for(var e,r,s=n[0],o=n[1],u=n[2],d=0,l=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e]);f&&f(n);while(l.length)l.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,n=0;n<c.length;n++){for(var a=c[n],e=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(e=!1)}e&&(c.splice(n--,1),t=o(o.s=a[0]))}return t}var e={},r={app:0},i={app:0},c=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-016a2650":"d2c1af5c","chunk-06f1fa1d":"a82d2567","chunk-0efde837":"e74d067e","chunk-26cbd69d":"7d4fe131","chunk-2a7dc76a":"65cdb81d","chunk-2bf05644":"f9138b00","chunk-2d0e4bf7":"4cb1e1aa","chunk-5cd9727a":"bacbd60d","chunk-68f2d54e":"a11ba102","chunk-70803262":"787af4cd","chunk-9b3e3fd2":"e0a7a7d4","chunk-a41ce01c":"85d0f512","chunk-d8047dac":"c8743f64","chunk-fda74d5a":"cfdc9dec"}[t]+".js"}function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var n=[],a={"chunk-06f1fa1d":1,"chunk-2a7dc76a":1,"chunk-2bf05644":1,"chunk-68f2d54e":1,"chunk-70803262":1,"chunk-a41ce01c":1};r[t]?n.push(r[t]):0!==r[t]&&a[t]&&n.push(r[t]=new Promise((function(n,a){for(var e="css/"+({}[t]||t)+"."+{"chunk-016a2650":"31d6cfe0","chunk-06f1fa1d":"907afccf","chunk-0efde837":"31d6cfe0","chunk-26cbd69d":"31d6cfe0","chunk-2a7dc76a":"aaa3a5b5","chunk-2bf05644":"182a8f4c","chunk-2d0e4bf7":"31d6cfe0","chunk-5cd9727a":"31d6cfe0","chunk-68f2d54e":"00b7edb4","chunk-70803262":"2e118a5f","chunk-9b3e3fd2":"31d6cfe0","chunk-a41ce01c":"88c26829","chunk-d8047dac":"31d6cfe0","chunk-fda74d5a":"31d6cfe0"}[t]+".css",i=o.p+e,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===e||d===i))return n()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===e||d===i)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var e=n&&n.target&&n.target.src||i,c=new Error("Loading CSS chunk "+t+" failed.\n("+e+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=e,delete r[t],f.parentNode.removeChild(f),a(c)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[t]=0})));var e=i[t];if(0!==e)if(e)n.push(e[2]);else{var c=new Promise((function(n,a){e=i[t]=[n,a]}));n.push(e[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=s(t);var l=new Error;u=function(n){d.onerror=d.onload=null,clearTimeout(f);var a=i[t];if(0!==a){if(a){var e=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+e+": "+r+")",l.name="ChunkLoadError",l.type=e,l.request=r,a[1](l)}i[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(n)},o.m=t,o.c=e,o.d=function(t,n,a){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)o.d(a,e,function(n){return t[n]}.bind(null,e));return a},o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="/javascriptTrainingCourse/mission8/dist/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var f=d;c.push([0,"chunk-vendors"]),a()})({0:function(t,n,a){t.exports=a("56d7")},1230:function(t,n,a){"use strict";var e=a("3335"),r=a.n(e);r.a},"2ff5":function(t,n,a){},3335:function(t,n,a){},"56d7":function(t,n,a){"use strict";a.r(n);a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var e=a("2b0e"),r=a("63f5"),i=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],s=(a("5c0b"),a("2877")),o={},u=Object(s["a"])(o,i,c,!1,null,null,null),d=u.exports,l=(a("45fc"),a("d3b7"),a("ac1f"),a("5319"),a("8c4f")),f=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"h-100 d-flex flex-column"},[a("loading",{attrs:{active:t.isLoading,"is-full-page":t.isFullPageLoading},on:{"update:active":function(n){t.isLoading=n}}}),a("div",{staticClass:"attraction-body"},[a("app-header"),a("router-view")],1),a("app-footer",{staticClass:"flex-shrink-0"})],1)},p=[],h=(a("99af"),a("7db0"),a("c740"),a("caad"),a("c975"),a("d81d"),a("a434"),a("2532"),function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",["/"===t.$route.path?a("div",{staticClass:"position-relative"},[a("div",{staticClass:"position-absolute jumbotron-img"}),a("div",{staticClass:"container d-flex flex-column",staticStyle:{"min-height":"100vh"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarNavAltMarkup"}},[a("div",{staticClass:"navbar-nav"},[a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/",exact:""}},[t._v(" 首頁 "),a("span",{staticClass:"sr-only"},[t._v("(current)")])]),a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/products"}},[t._v(" 產品 ")]),a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t.productInCartCount?a("div",{staticClass:"badge badge-pill badge-danger cart-badge"},[t._v(" "+t._s(t.productInCartCount)+" ")]):t._e()])],1)])],1),a("div",{staticClass:"row justify-content-center my-auto"},[a("div",{staticClass:"col-md-4 text-center"},[t._m(1),a("p",{staticClass:"text-muted mb-0"},[t._v(" 只溶於口、不溶於手 ")]),a("button",{staticClass:"btn btn-dark rounded-0 mt-6",on:{click:t.viewProducts}},[t._v("選購產品")])])])])]):t.$route.path.endsWith("checkOutFinished")?a("div",{staticClass:"position-relative d-flex"},[a("div",{staticClass:"container d-flex flex-column",staticStyle:{"min-height":"100vh"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light px-0"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")])],1),a("div",{staticClass:"row my-auto pb-7"},[a("div",{staticClass:"col-md-4 d-flex flex-column"},[a("div",{staticClass:"my-auto"},[a("h2",[t._v("訂購完成")]),a("p",[t._v("已送出您的訂購單，歡迎您再次選購，謝謝！")]),a("router-link",{staticClass:"btn btn-dark mt-4 px-5",attrs:{to:"/",exact:""}},[t._v("回到首頁")])],1)])])]),a("div",{staticClass:"w-md-50 w-100 position-absolute opacity-1 checkout-finished-img"})]):t.$route.path.includes("checkOut")?a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-10"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light px-0"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(2)],1)])])]):a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(3),a("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarNavAltMarkup"}},[a("div",{staticClass:"navbar-nav"},[a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/",exact:""}},[t._v(" 首頁 "),a("span",{staticClass:"sr-only"},[t._v("(current)")])]),a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/products"}},[t._v(" 產品 ")]),a("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t.productInCartCount?a("div",{staticClass:"badge badge-pill badge-danger cart-badge"},[t._v(" "+t._s(t.productInCartCount)+" ")]):t._e()])],1)])],1)])])}),v=[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("h2",[t._v("歡迎回來"),a("br"),a("span",{staticClass:"navbar-brand"},[t._v("Sweety")])])},function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ul",{staticClass:"list-unstyled mb-0 ml-md-auto d-flex align-items-center\n            justify-content-between justify-content-md-end w-100 mt-md-0 mt-4"},[a("li",{staticClass:"mr-md-6 mr-3 position-relative custom-step-line"},[a("i",{staticClass:"fas fa-check-circle d-md-inline d-block text-center"}),t._v(" "),a("span",{staticClass:"text-nowrap"},[t._v("購物清單")])]),a("li",{staticClass:"mr-md-6 mr-3 position-relative custom-step-line"},[a("i",{staticClass:"fas fa-check-circle d-md-inline d-block text-center"}),t._v(" "),a("span",{staticClass:"text-nowrap"},[t._v("訂單填寫")])]),a("li",[a("i",{staticClass:"fas fa-dot-circle d-md-inline d-block text-center"}),t._v(" "),a("span",{staticClass:"text-nowrap"},[t._v("訂單完成")])])])},function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],m={name:"Header",data:function(){return{productInCartCount:0}},created:function(){var t=this;this.$bus.$on("productInCartCount",(function(n){t.productInCartCount=n}))},beforeDestroy:function(){this.$bus.$off("productInCartCount")},methods:{viewProducts:function(){this.$router.push("/products")}}},b=m,C=(a("56f7"),Object(s["a"])(b,h,v,!1,null,"1447f239",null)),g=C.exports,_=function(){var t=this,n=t.$createElement,a=t._self._c||n;return t.$route.path.includes("checkOut")?t._e():a("div",{staticClass:"bg-dark"},[t._m(0)])},k=[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"container"},[a("div",{staticClass:"d-flex align-items-center justify-content-between text-white py-4"},[a("p",{staticClass:"mb-0"},[t._v("© 2020 Sweety All Rights Reserved.")]),a("ul",{staticClass:"d-flex list-unstyled mb-0 h4"},[a("li",[a("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-facebook"})])]),a("li",[a("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-instagram"})])]),a("li",[a("a",{staticClass:"text-white ml-3",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-line"})])])])])])}],y={},x=Object(s["a"])(y,_,k,!1,null,null,null),I=x.exports,w={name:"Attraction",components:{AppHeader:g,AppFooter:I},data:function(){return{apiInfo:{forCart:"/ec/shopping",forProducts:"/ec/products"},productIdsInCart:[],productsInCart:[],isLoading:!1,isFullPageLoading:!0,pagination:{}}},created:function(){var t=this;this.registerBusEvents(),this.isLoading=!0,this.getProductIdsInCart().then((function(n){t.setProductIdsInCart(n),t.broadcastProductInCartCount(),t.isLoading=!1})).catch((function(n){t.isLoading=!1,console.log(n)}))},beforeDestroy:function(){this.destroyBusEvents()},methods:{registerBusEvents:function(){var t=this;this.$bus.$on("isProductInCart",(function(n){setTimeout((function(){t.$bus.$emit("productInCart",t.getProductQuantity(n))}),1e3)})),this.$bus.$on("addProductToCart",(function(n){var a=n.id,e=n.quantity;if(t.productIdsInCart.includes(a)){var r=t.productsInCart.find((function(t){return t.product.id===a}));r.quantity+=e}else t.productIdsInCart.push(a),t.productsInCart.push({product:{id:a},quantity:e}),t.broadcastProductInCartCount()})),this.$bus.$on("removeProductFromCart",(function(n){t.productIdsInCart.includes(n)&&(t.productIdsInCart.splice(t.productIdsInCart.indexOf(n),1),t.productsInCart.splice(t.productsInCart.findIndex((function(t){return t.product.id===n})),1),t.broadcastProductInCartCount())})),this.$bus.$on("resetCart",(function(){t.productIdsInCart.splice(0,t.productIdsInCart.length),t.productsInCart.splice(0,t.productsInCart.length),t.broadcastProductInCartCount()}))},destroyBusEvents:function(){this.$bus.$off("isProductInCart"),this.$bus.$off("addProductToCart"),this.$bus.$off("removeProductFromCart"),this.$bus.$off("resetCart")},getProductQuantity:function(t){return this.productIdsInCart.includes(t)?this.productsInCart.find((function(n){return n.product.id===t})).quantity:0},givePage:function(t){return t||(this.pagination.current_page||1)},getProductIdsInCart:function(t){return this.axios.get("".concat(this.apiInfo.forCart,"?page=").concat(this.givePage(t)))},setProductIdsInCart:function(t){this.productIdsInCart=t.data.data.map((function(t){return t.product.id})),this.productsInCart=t.data.data},broadcastProductInCartCount:function(){this.$bus.$emit("productInCartCount",this.productIdsInCart.length)}}},$=w,P=(a("1230"),Object(s["a"])($,f,p,!1,null,null,null)),O=P.exports;e["a"].use(l["a"]);var j=[{path:"/",component:O,children:[{path:"",name:"attraction.index",component:function(){return a.e("chunk-2a7dc76a").then(a.bind(null,"4fa0"))}},{path:"products",name:"attraction.products",component:function(){return a.e("chunk-70803262").then(a.bind(null,"347e"))}},{path:"product",name:"attraction.product",component:function(){return a.e("chunk-9b3e3fd2").then(a.bind(null,"0b17"))},children:[{path:":id",name:"attraction.product.id",component:function(){return a.e("chunk-9b3e3fd2").then(a.bind(null,"0b17"))}}]},{path:"cart",name:"attraction.cart",component:function(){return a.e("chunk-fda74d5a").then(a.bind(null,"48af"))}},{path:"checkOut",name:"attraction.checkOut",component:function(){return a.e("chunk-d8047dac").then(a.bind(null,"7c0d"))}},{path:"checkOutFinished",name:"attraction.checkOutFinished",component:function(){return a.e("chunk-2d0e4bf7").then(a.bind(null,"9219"))}},{path:"about",name:"attraction.about",component:function(){return a.e("chunk-a41ce01c").then(a.bind(null,"d376"))}}]},{path:"/login",name:"login",component:function(){return a.e("chunk-2bf05644").then(a.bind(null,"a55b"))}},{path:"/admin",component:function(){return a.e("chunk-68f2d54e").then(a.bind(null,"3530"))},meta:{requiresAuth:!0},children:[{path:"",name:"admin.index",component:function(){return a.e("chunk-06f1fa1d").then(a.bind(null,"0a09"))}},{path:"products",name:"admin.products",component:function(){return a.e("chunk-016a2650").then(a.bind(null,"d416"))}},{path:"orders",name:"admin.orders",component:function(){return a.e("chunk-26cbd69d").then(a.bind(null,"5651"))}},{path:"coupons",name:"admin.coupons",component:function(){return a.e("chunk-0efde837").then(a.bind(null,"d0a3"))}},{path:"storages",name:"admin.storages",component:function(){return a.e("chunk-5cd9727a").then(a.bind(null,"d711"))}}]}],E=new l["a"]({routes:j,linkActiveClass:"active"});function S(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchoolToken\s*=\s*([^;]*).*$)|^.*$/,"$1");return""!==t&&(Object(r["b"])(t),!0)}E.beforeEach((function(t,n,a){t.matched.some((function(t){return t.meta.requiresAuth}))?S()?a():a({path:"/login",query:{redirect:t.fullPath}}):a()}));var A=E,T=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0});function L(t){return null===t||void 0===t?"":T.format(t)}var N=L,q=(a("4989"),a("1157")),F=a.n(q);window.$=F.a;var M=a("9062"),B=a.n(M);a("e40d");e["a"].component("Loading",B.a);a("4160"),a("b64b"),a("159b");var D=a("7bb1"),z=a("4c93"),U=a("596a");Object.keys(z).forEach((function(t){Object(D["d"])(t,z[t])})),Object(D["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),Object(D["e"])("tw",U),e["a"].component("ValidationProvider",D["b"]),e["a"].component("ValidationObserver",D["a"]),e["a"].config.productionTip=!1,e["a"].prototype.$bus=new e["a"],Object(r["a"])(),Object(r["c"])(),e["a"].filter("formatCurrency",N),new e["a"]({router:A,render:function(t){return t(d)}}).$mount("#app")},"56f7":function(t,n,a){"use strict";var e=a("2ff5"),r=a.n(e);r.a},"596a":function(t){t.exports=JSON.parse('{"code":"zh_TW","names":{"name":"收件人姓名","email":"電子信箱","tel":"聯絡電話","address":"收件人地址","payment":"付款方式"},"messages":{"alpha":"{_field_} 須以英文組成","alpha_dash":"{_field_} 須以英數、斜線及底線組成","alpha_num":"{_field_} 須以英數組成","alpha_spaces":"{_field_} 須以英文及空格組成","between":"{_field_} 須介於 {min} 至 {max}之間","confirmed":" {_field_} 不一致","digits":"{_field_} 須為 {length} 位數字","dimensions":"{_field_} 圖片尺寸不正確。須為 {width} x {height} 像素","email":"{_field_} 須為有效的電子信箱","excluded":"{_field_} 的選項無效","ext":"{_field_} 須為有效的檔案","image":"{_field_} 須為圖片","oneOf":"{_field_} 的選項無效","integer":"{_field_} 須為整數","length":"{_field_} 的長度須為 {length}","max":"{_field_} 不能大於 {length} 個字元","max_value":"{_field_} 不得大於 {max}","mimes":"{_field_} 須為有效的檔案類型","min":"{_field_} 不能小於 {length} 個字元","min_value":"{_field_} 不得小於 {min}","numeric":"{_field_} 須為數字","regex":"{_field_} 的格式錯誤","required":"{_field_} 為必填","required_if":"{_field_} 為必填","size":"{_field_} 的檔案須小於 {size}KB"}}')},"5c0b":function(t,n,a){"use strict";var e=a("9c0c"),r=a.n(e);r.a},"63f5":function(t,n,a){"use strict";a.d(n,"a",(function(){return o})),a.d(n,"c",(function(){return d})),a.d(n,"b",(function(){return l}));a("99af");var e=a("2b0e"),r=a("bc3a"),i=a.n(r),c=a("a7fe"),s=a.n(c);function o(){e["a"].use(s.a,i.a)}function u(t){i.a.defaults.baseURL=t}function d(){u("".concat("https://course-ec-api.hexschool.io/api/").concat("840d218c-ef17-4e49-90d3-cfef6170a5e5","/"))}function l(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)}e["a"].use(s.a,i.a)},"9c0c":function(t,n,a){}});
//# sourceMappingURL=app.ba36e524.js.map