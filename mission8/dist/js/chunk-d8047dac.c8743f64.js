(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8047dac"],{"13d5":function(t,a,e){"use strict";var s=e("23e7"),r=e("d58f").left,i=e("a640"),o=e("ae40"),n=i("reduce"),l=o("reduce",{1:0});s({target:"Array",proto:!0,forced:!n||!l},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"7c0d":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"checkOut"}},[e("loading",{attrs:{active:t.isLoading,"is-full-page":t.isFullPageLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),e("div",{staticClass:"row flex-row-reverse justify-content-center pb-5"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"border p-4 mb-4"},[t._l(t.cart,(function(a,s){return e("div",{key:"item"+s,staticClass:"d-flex",class:{"mt-2":s>0}},[e("img",{staticClass:"mr-2",staticStyle:{width:"48px",height:"48px","object-fit":"cover"},attrs:{src:a.product.imageUrl[0],alt:""}}),e("div",{staticClass:"w-100"},[e("div",{staticClass:"d-flex justify-content-between"},[e("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(a.product.title))]),e("p",{staticClass:"mb-0"},[t._v(t._s(t._f("formatCurrency")(a.product.price)))])]),e("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s("x"+a.quantity))])])])})),e("table",{staticClass:"table mt-4 border-top border-bottom text-muted"},[e("tbody",[e("tr",[e("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v("小計")]),e("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v(t._s(t._f("formatCurrency")(t.priceSummary)))])]),e("tr",[e("th",{staticClass:"border-0 px-0 pt-0 pb-4 font-weight-normal",attrs:{scope:"row"}},[t._v("付款方式")]),e("td",{staticClass:"text-right border-0 px-0 pt-0 pb-4"},[t._v(t._s(t.formData.payment))])])])]),e("div",{staticClass:"d-flex justify-content-between mt-4"},[e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v(t._s(t._f("formatCurrency")(t.priceSummary)))])])],2)]),e("div",{staticClass:"col-md-6"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid,r=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),r(t.submitForm)}}},[e("p",[t._v("聯絡資訊")]),e("div",{staticClass:"form-group mb-0"},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"email"}},[t._v("電子郵件")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:r,attrs:{type:"email",id:"email",placeholder:"example@gmail.com"},domProps:{value:t.formData.email},on:{input:function(a){a.target.composing||t.$set(t.formData,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("p",{staticClass:"mt-4"},[t._v("運送地址")]),e("div",{staticClass:"form-group mb-2"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{staticClass:"text-muted mb-0",attrs:{for:"name"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"name",placeholder:"請輸入收件人姓名"},domProps:{value:t.formData.name},on:{input:function(a){a.target.composing||t.$set(t.formData,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{staticClass:"text-muted mb-0",attrs:{for:"tel"}},[t._v("聯絡電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.tel,expression:"formData.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",id:"tel",placeholder:"請輸入聯絡電話"},domProps:{value:t.formData.tel},on:{input:function(a){a.target.composing||t.$set(t.formData,"tel",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{staticClass:"text-muted mb-0",attrs:{for:"address"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"address",placeholder:"請輸入收件人地址"},domProps:{value:t.formData.address},on:{input:function(a){a.target.composing||t.$set(t.formData,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"text-muted mb-0",attrs:{for:"message"}},[t._v("備註")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.message,expression:"formData.message"}],staticClass:"form-control",attrs:{id:"message",rows:"3",placeholder:"請留下額外想說的話..."},domProps:{value:t.formData.message},on:{input:function(a){a.target.composing||t.$set(t.formData,"message",a.target.value)}}})]),e("div",{staticClass:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between\n            align-items-md-center align-items-end w-100"},[e("router-link",{staticClass:"text-dark mt-md-0 mt-3",attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-chevron-left mr-2"}),t._v(" 購物清單 ")]),e("button",{staticClass:"btn btn-dark py-3 px-7",attrs:{type:"submit",disabled:s}},[t._v("送出訂單")])],1)])]}}])})],1)])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("h3",{staticClass:"font-weight-bold mb-4 pt-3"},[t._v("訂單填寫")])])])}],i=(e("99af"),e("13d5"),e("ac1f"),e("5319"),{data:function(){return{apiInfo:{forCart:"/ec/shopping",forOrder:"/ec/orders"},cart:[],paymentMethods:["WebATM","ATM","CVS","Barcode","Credit","ApplePay","GooglePay"],formData:{name:"",email:"",tel:"",address:"",payment:"Credit",message:""},isLoading:!1,isFullPageLoading:!0,pagination:{}}},computed:{priceSummary:function(){return this.cart.reduce((function(t,a){return t+a.product.price*a.quantity}),0)}},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchoolPayment\s*=\s*([^;]*).*$)|^.*$/,"$1");t&&(this.formData.payment=t)},mounted:function(){this.getCart()},methods:{givePage:function(t){return t||(this.pagination.current_page||1)},getCart:function(t){var a=this;this.isLoading=!0,this.axios.get("".concat(this.apiInfo.forCart,"?page=").concat(this.givePage(t))).then((function(t){a.cart=t.data.data,a.pagination=t.data.meta.pagination,0===a.cart.length&&a.$router.replace("/"),a.isLoading=!1})).catch((function(t){a.isLoading=!1,console.log(t)}))},submitForm:function(){var t=this;this.isLoading=!0,this.axios.post(this.apiInfo.forOrder,this.formData).then((function(){t.isLoading=!1,t.$bus.$emit("resetCart"),t.$router.push("/checkOutFinished")})).catch((function(a){t.isLoading=!1,console.log(a)}))}}}),o=i,n=e("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);a["default"]=l.exports},d58f:function(t,a,e){var s=e("1c0b"),r=e("7b0b"),i=e("44ad"),o=e("50c4"),n=function(t){return function(a,e,n,l){s(e);var c=r(a),d=i(c),m=o(c.length),u=t?m-1:0,f=t?-1:1;if(n<2)while(1){if(u in d){l=d[u],u+=f;break}if(u+=f,t?u<0:m<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:m>u;u+=f)u in d&&(l=e(l,d[u],u,c));return l}};t.exports={left:n(!1),right:n(!0)}}}]);
//# sourceMappingURL=chunk-d8047dac.c8743f64.js.map