(function(t){function n(n){for(var a,r,s=n[0],o=n[1],u=n[2],d=0,l=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);f&&f(n);while(l.length)l.shift()();return c.push.apply(c,u||[]),e()}function e(){for(var t,n=0;n<c.length;n++){for(var e=c[n],a=!0,r=1;r<e.length;r++){var s=e[r];0!==i[s]&&(a=!1)}a&&(c.splice(n--,1),t=o(o.s=e[0]))}return t}var a={},r={app:0},i={app:0},c=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-06f1fa1d":"a82d2567","chunk-0efde837":"e74d067e","chunk-26cbd69d":"7d4fe131","chunk-2a797c64":"f6f1d02f","chunk-2bf05644":"f9138b00","chunk-2d0e4bf7":"4cb1e1aa","chunk-567ff867":"6a87bf74","chunk-5f06995a":"9e3f6ce9","chunk-64144b8b":"aa9d0b81","chunk-68f2d54e":"a11ba102","chunk-b0a27288":"d8dd623f","chunk-c6909cf6":"1139607f","chunk-f0ed83ee":"f8d486cb","chunk-f7284b50":"7f8f84bb"}[t]+".js"}function o(n){if(a[n])return a[n].exports;var e=a[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.e=function(t){var n=[],e={"chunk-06f1fa1d":1,"chunk-2a797c64":1,"chunk-2bf05644":1,"chunk-5f06995a":1,"chunk-64144b8b":1,"chunk-68f2d54e":1,"chunk-c6909cf6":1};r[t]?n.push(r[t]):0!==r[t]&&e[t]&&n.push(r[t]=new Promise((function(n,e){for(var a="css/"+({}[t]||t)+"."+{"chunk-06f1fa1d":"907afccf","chunk-0efde837":"31d6cfe0","chunk-26cbd69d":"31d6cfe0","chunk-2a797c64":"150e70e3","chunk-2bf05644":"182a8f4c","chunk-2d0e4bf7":"31d6cfe0","chunk-567ff867":"31d6cfe0","chunk-5f06995a":"0edb5a05","chunk-64144b8b":"109bde9b","chunk-68f2d54e":"00b7edb4","chunk-b0a27288":"31d6cfe0","chunk-c6909cf6":"80424102","chunk-f0ed83ee":"31d6cfe0","chunk-f7284b50":"31d6cfe0"}[t]+".css",i=o.p+a,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===i))return n()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===a||d===i)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var a=n&&n.target&&n.target.src||i,c=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[t],f.parentNode.removeChild(f),e(c)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)n.push(a[2]);else{var c=new Promise((function(n,e){a=i[t]=[n,e]}));n.push(a[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=s(t);var l=new Error;u=function(n){d.onerror=d.onload=null,clearTimeout(f);var e=i[t];if(0!==e){if(e){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,e[1](l)}i[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(n)},o.m=t,o.c=a,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)o.d(e,a,function(n){return t[n]}.bind(null,a));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="/javascriptTrainingCourse/mission8/dist/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var f=d;c.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},1230:function(t,n,e){"use strict";var a=e("3335"),r=e.n(a);r.a},3335:function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("4de4"),e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),r=e("63f5"),i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},c=[],s=(e("5c0b"),e("2877")),o={},u=Object(s["a"])(o,i,c,!1,null,null,null),d=u.exports,l=(e("45fc"),e("d3b7"),e("ac1f"),e("5319"),e("8c4f")),f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"h-100 d-flex flex-column"},[e("loading",{attrs:{active:t.isLoading,"is-full-page":t.isFullPageLoading},on:{"update:active":function(n){t.isLoading=n}}}),e("div",{staticClass:"attraction-body"},[e("app-header"),e("router-view")],1),e("app-footer",{staticClass:"flex-shrink-0"})],1)},p=[],h=(e("99af"),e("7db0"),e("c740"),e("caad"),e("c975"),e("d81d"),e("a434"),e("2532"),function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",["/"===t.$route.path?e("div",{staticClass:"position-relative"},[e("div",{staticClass:"position-absolute jumbotron-img"}),e("div",{staticClass:"container d-flex flex-column",staticStyle:{"min-height":"100vh"}},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarNavAltMarkup"}},[e("div",{staticClass:"navbar-nav"},[e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/",exact:""}},[t._v(" 首頁 "),e("span",{staticClass:"sr-only"},[t._v("(current)")])]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/products"}},[t._v(" 享美味 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/coupon"}},[t._v(" 享折扣 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-shopping-cart"}),t.productInCartCount?e("div",{staticClass:"badge badge-pill badge-danger cart-badge"},[t._v(" "+t._s(t.productInCartCount)+" ")]):t._e()])],1)])],1),e("div",{staticClass:"row justify-content-center my-auto"},[e("div",{staticClass:"col-md-4 text-center"},[t._m(1),e("p",{staticClass:"text-muted mb-0"},[t._v(" 只溶於口、不溶於手 ")]),e("button",{staticClass:"btn btn-dark rounded-0 mt-6",on:{click:t.viewProducts}},[t._v("享美味")])])])])]):t.$route.path.endsWith("checkOutFinished")?e("div",{staticClass:"position-relative d-flex"},[e("div",{staticClass:"container d-flex flex-column",staticStyle:{"min-height":"100vh"}},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light px-0"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")])],1),e("div",{staticClass:"row my-auto pb-7"},[e("div",{staticClass:"col-md-4 d-flex flex-column"},[e("div",{staticClass:"my-auto"},[e("h2",[t._v("訂購完成")]),e("p",[t._v("已送出您的訂購單，歡迎您再次選購，謝謝！")]),e("router-link",{staticClass:"btn btn-dark mt-4 px-5",attrs:{to:"/",exact:""}},[t._v("回到首頁")])],1)])])]),e("div",{staticClass:"w-md-50 w-100 position-absolute opacity-1 checkout-finished-img"})]):t.$route.path.includes("checkOut")?e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light px-0"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(2)],1)])])]):e("div",{staticClass:"container"},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v(" Sweety ")]),t._m(3),e("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarNavAltMarkup"}},[e("div",{staticClass:"navbar-nav"},[e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/",exact:""}},[t._v(" 首頁 "),e("span",{staticClass:"sr-only"},[t._v("(current)")])]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/products"}},[t._v(" 享美味 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/coupon"}},[t._v(" 享折扣 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-shopping-cart"}),t.productInCartCount?e("div",{staticClass:"badge badge-pill badge-danger cart-badge"},[t._v(" "+t._s(t.productInCartCount)+" ")]):t._e()])],1)])],1)])])}),v=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h2",[t._v("就是享要..."),e("br"),e("span",{staticClass:"navbar-brand"},[t._v("Sweety")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",{staticClass:"list-unstyled mb-0 ml-md-auto d-flex align-items-center\n            justify-content-between justify-content-md-end w-100 mt-md-0 mt-4"},[e("li",{staticClass:"mr-md-6 mr-3 position-relative custom-step-line"},[e("i",{staticClass:"fas fa-check-circle d-md-inline d-block text-center"}),t._v(" "),e("span",{staticClass:"text-nowrap"},[t._v("購物清單")])]),e("li",{staticClass:"mr-md-6 mr-3 position-relative custom-step-line"},[e("i",{staticClass:"fas fa-check-circle d-md-inline d-block text-center"}),t._v(" "),e("span",{staticClass:"text-nowrap"},[t._v("訂單填寫")])]),e("li",[e("i",{staticClass:"fas fa-dot-circle d-md-inline d-block text-center"}),t._v(" "),e("span",{staticClass:"text-nowrap"},[t._v("訂單完成")])])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],b={name:"Header",data:function(){return{productInCartCount:0}},created:function(){var t=this;this.$bus.$on("productInCartCount",(function(n){t.productInCartCount=n}))},beforeDestroy:function(){this.$bus.$off("productInCartCount")},methods:{viewProducts:function(){this.$router.push("/products")}}},m=b,C=(e("d565"),Object(s["a"])(m,h,v,!1,null,"3d37aecf",null)),g=C.exports,_=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.$route.path.includes("checkOut")?t._e():e("div",{staticClass:"bg-dark"},[t._m(0)])},k=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("div",{staticClass:"d-flex align-items-center justify-content-between text-white py-4"},[e("p",{staticClass:"mb-0"},[t._v("© 2020 Sweety All Rights Reserved.")]),e("ul",{staticClass:"d-flex list-unstyled mb-0 h4"},[e("li",[e("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-facebook"})])]),e("li",[e("a",{staticClass:"text-white mx-3",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-instagram"})])]),e("li",[e("a",{staticClass:"text-white ml-3",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-line"})])])])])])}],y={},x=Object(s["a"])(y,_,k,!1,null,null,null),I=x.exports,w={name:"Attraction",components:{AppHeader:g,AppFooter:I},data:function(){return{apiInfo:{forCart:"/ec/shopping",forProducts:"/ec/products"},productIdsInCart:[],productsInCart:[],isLoading:!1,isFullPageLoading:!0,pagination:{}}},created:function(){var t=this;this.registerBusEvents(),this.isLoading=!0,this.getProductIdsInCart().then((function(n){t.setProductIdsInCart(n),t.broadcastProductInCartCount(),t.isLoading=!1})).catch((function(n){t.isLoading=!1,console.log(n)}))},beforeDestroy:function(){this.destroyBusEvents()},methods:{registerBusEvents:function(){var t=this;this.$bus.$on("isProductInCart",(function(n){setTimeout((function(){t.$bus.$emit("productInCart",t.getProductQuantity(n))}),1e3)})),this.$bus.$on("addProductToCart",(function(n){var e=n.id,a=n.quantity;if(t.productIdsInCart.includes(e)){var r=t.productsInCart.find((function(t){return t.product.id===e}));r.quantity+=a}else t.productIdsInCart.push(e),t.productsInCart.push({product:{id:e},quantity:a}),t.broadcastProductInCartCount()})),this.$bus.$on("removeProductFromCart",(function(n){t.productIdsInCart.includes(n)&&(t.productIdsInCart.splice(t.productIdsInCart.indexOf(n),1),t.productsInCart.splice(t.productsInCart.findIndex((function(t){return t.product.id===n})),1),t.broadcastProductInCartCount())})),this.$bus.$on("resetCart",(function(){t.productIdsInCart.splice(0,t.productIdsInCart.length),t.productsInCart.splice(0,t.productsInCart.length),t.broadcastProductInCartCount()}))},destroyBusEvents:function(){this.$bus.$off("isProductInCart"),this.$bus.$off("addProductToCart"),this.$bus.$off("removeProductFromCart"),this.$bus.$off("resetCart")},getProductQuantity:function(t){return this.productIdsInCart.includes(t)?this.productsInCart.find((function(n){return n.product.id===t})).quantity:0},givePage:function(t){return t||(this.pagination.current_page||1)},getProductIdsInCart:function(t){return this.axios.get("".concat(this.apiInfo.forCart,"?page=").concat(this.givePage(t)))},setProductIdsInCart:function(t){this.productIdsInCart=t.data.data.map((function(t){return t.product.id})),this.productsInCart=t.data.data},broadcastProductInCartCount:function(){this.$bus.$emit("productInCartCount",this.productIdsInCart.length)}}},$=w,P=(e("1230"),Object(s["a"])($,f,p,!1,null,null,null)),O=P.exports;a["a"].use(l["a"]);var j=[{path:"/",component:O,children:[{path:"",name:"attraction.index",component:function(){return e.e("chunk-c6909cf6").then(e.bind(null,"4fa0"))}},{path:"products",name:"attraction.products",component:function(){return e.e("chunk-2a797c64").then(e.bind(null,"347e"))},children:[{path:":category",name:"attraction.products.category",component:function(){return e.e("chunk-2a797c64").then(e.bind(null,"347e"))}}]},{path:"product",name:"attraction.product",component:function(){return e.e("chunk-5f06995a").then(e.bind(null,"0b17"))},children:[{path:":id",name:"attraction.product.id",meta:{scrollToTop:!0},component:function(){return e.e("chunk-5f06995a").then(e.bind(null,"0b17"))}}]},{path:"cart",name:"attraction.cart",component:function(){return e.e("chunk-567ff867").then(e.bind(null,"48af"))}},{path:"checkOut",name:"attraction.checkOut",component:function(){return e.e("chunk-f0ed83ee").then(e.bind(null,"7c0d"))},children:[{path:":coupon",name:"attraction.checkOut.coupon",component:function(){return e.e("chunk-f0ed83ee").then(e.bind(null,"7c0d"))}}]},{path:"checkOutFinished",name:"attraction.checkOutFinished",component:function(){return e.e("chunk-2d0e4bf7").then(e.bind(null,"9219"))}},{path:"coupon",name:"attraction.coupon",component:function(){return e.e("chunk-64144b8b").then(e.bind(null,"4b18"))}}]},{path:"/login",name:"login",component:function(){return e.e("chunk-2bf05644").then(e.bind(null,"a55b"))}},{path:"/admin",component:function(){return e.e("chunk-68f2d54e").then(e.bind(null,"3530"))},meta:{requiresAuth:!0},children:[{path:"",name:"admin.index",component:function(){return e.e("chunk-06f1fa1d").then(e.bind(null,"0a09"))}},{path:"products",name:"admin.products",component:function(){return e.e("chunk-f7284b50").then(e.bind(null,"d416"))}},{path:"orders",name:"admin.orders",component:function(){return e.e("chunk-26cbd69d").then(e.bind(null,"5651"))}},{path:"coupons",name:"admin.coupons",component:function(){return e.e("chunk-0efde837").then(e.bind(null,"d0a3"))}},{path:"storages",name:"admin.storages",component:function(){return e.e("chunk-b0a27288").then(e.bind(null,"d711"))}}]}];function E(t,n,e){return e||!!t.matched.some((function(t){return t.meta.scrollToTop}))&&{x:0,y:0}}var S=new l["a"]({routes:j,linkActiveClass:"active",scrollBehavior:E});function A(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexSchoolToken\s*=\s*([^;]*).*$)|^.*$/,"$1");return""!==t&&(Object(r["b"])(t),!0)}S.beforeEach((function(t,n,e){t.matched.some((function(t){return t.meta.requiresAuth}))?A()?e():e({path:"/login",query:{redirect:t.fullPath}}):e()}));var T=S,L=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0});function N(t){return null===t||void 0===t?"":L.format(t)}var q=N,F=(e("4989"),e("1157")),B=e.n(F);window.$=B.a;var M=e("9062"),D=e.n(M);e("e40d");a["a"].component("Loading",D.a);e("4160"),e("b64b"),e("159b");var z=e("7bb1"),U=e("4c93"),H=e("596a");Object.keys(U).forEach((function(t){Object(z["d"])(t,U[t])})),Object(z["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),Object(z["e"])("tw",H),a["a"].component("ValidationProvider",z["b"]),a["a"].component("ValidationObserver",z["a"]),a["a"].config.productionTip=!1,a["a"].prototype.$bus=new a["a"],Object(r["a"])(),Object(r["c"])(),a["a"].filter("formatCurrency",q),new a["a"]({router:T,render:function(t){return t(d)}}).$mount("#app")},"596a":function(t){t.exports=JSON.parse('{"code":"zh_TW","names":{"name":"收件人姓名","email":"電子信箱","tel":"聯絡電話","address":"收件人地址","payment":"付款方式"},"messages":{"alpha":"{_field_} 須以英文組成","alpha_dash":"{_field_} 須以英數、斜線及底線組成","alpha_num":"{_field_} 須以英數組成","alpha_spaces":"{_field_} 須以英文及空格組成","between":"{_field_} 須介於 {min} 至 {max}之間","confirmed":" {_field_} 不一致","digits":"{_field_} 須為 {length} 位數字","dimensions":"{_field_} 圖片尺寸不正確。須為 {width} x {height} 像素","email":"{_field_} 須為有效的電子信箱","excluded":"{_field_} 的選項無效","ext":"{_field_} 須為有效的檔案","image":"{_field_} 須為圖片","oneOf":"{_field_} 的選項無效","integer":"{_field_} 須為整數","length":"{_field_} 的長度須為 {length}","max":"{_field_} 不能大於 {length} 個字元","max_value":"{_field_} 不得大於 {max}","mimes":"{_field_} 須為有效的檔案類型","min":"{_field_} 不能小於 {length} 個字元","min_value":"{_field_} 不得小於 {min}","numeric":"{_field_} 須為數字","regex":"{_field_} 的格式錯誤","required":"{_field_} 為必填","required_if":"{_field_} 為必填","size":"{_field_} 的檔案須小於 {size}KB"}}')},"5c0b":function(t,n,e){"use strict";var a=e("9c0c"),r=e.n(a);r.a},"63f5":function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"c",(function(){return d})),e.d(n,"b",(function(){return l}));e("99af");var a=e("2b0e"),r=e("bc3a"),i=e.n(r),c=e("a7fe"),s=e.n(c);function o(){a["a"].use(s.a,i.a)}function u(t){i.a.defaults.baseURL=t}function d(){u("".concat("https://course-ec-api.hexschool.io/api/").concat("840d218c-ef17-4e49-90d3-cfef6170a5e5","/"))}function l(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)}a["a"].use(s.a,i.a)},"72c3":function(t,n,e){},"9c0c":function(t,n,e){},d565:function(t,n,e){"use strict";var a=e("72c3"),r=e.n(a);r.a}});
//# sourceMappingURL=app.02caec05.js.map