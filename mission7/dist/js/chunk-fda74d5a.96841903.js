(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda74d5a"],{"13d5":function(t,a,e){"use strict";var i=e("23e7"),n=e("d58f").left,r=e("a640"),s=e("ae40"),o=r("reduce"),c=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!c},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"48af":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"cart"}},[e("loading",{attrs:{active:t.isLoading,"is-full-page":t.isFullPageLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"text-right mt-4"},[e("button",{staticClass:"btn btn-danger",attrs:{disabled:0===t.cart.length},on:{click:t.openDeleteCartModal}},[t._v(" 刪除整份購物清單 ")])]),e("table",{staticClass:"table mt-4"},[t._m(0),e("tbody",[t._l(t.cart,(function(a){return e("tr",{key:a.product.id},[e("td",{staticClass:"text-center align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"text-center"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"quantity",e.target.multiple?i:i[0])},function(e){return t.editItemAmount(a)}]}},t._l(10,(function(a){return e("option",{key:"amount"+a},[t._v(t._s(a))])})),0)]),e("td",{staticClass:"text-center align-middle"},[t._v(t._s(a.product.unit))]),e("td",{staticClass:"text-right align-middle"},[t._v(t._s(t._f("formatCurrency")(a.product.price)))]),e("td",{staticClass:"text-center align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.deleteItem(a)}}},[e("i",{staticClass:"far fa-trash-alt"})])])])})),e("tr",[e("td"),e("td"),e("td",{staticClass:"text-right"},[t._v("總計")]),e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v(t._s(t._f("formatCurrency")(t.priceSummary)))])])],2)]),e("cart-remover",{ref:"cartRemover",on:{"refresh-cart":t.getCart,"set-loading":t.setLoading}}),e("div",{staticClass:"row my-4"},[e("div",{staticClass:"col-6"},[e("router-link",{attrs:{to:"/products"}},[t._v("◁ 回到產品列表")])],1),e("div",{staticClass:"col-6 text-right"},[t.cart.length>0?e("router-link",{attrs:{to:"/checkOut"}},[t._v("前往結帳 ▷")]):t._e()],1)])],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("產品名稱")]),e("th",{staticClass:"text-center",attrs:{width:"150"}},[t._v("數量")]),e("th",{staticClass:"text-center",attrs:{width:"70"}},[t._v("單位")]),e("th",{staticClass:"text-center",attrs:{width:"100"}},[t._v("售價")]),e("th",{staticClass:"text-center",attrs:{width:"70"}},[t._v("刪除")])])])}],r=(e("99af"),e("13d5"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"cartRemoverModal",tabindex:"-1",role:"dialog","aria-labelledby":"cartRemoverModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(0),t._m(1),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCart}},[t._v("確認刪除")])])])])])}),s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title"},[t._v("刪除整份購物清單")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-body"},[e("strong",[t._v("確認要刪除整份購物清單？")])])}],o={data:function(){return{apiInfo:{forEntireCart:"/ec/shopping/all/product"}}},methods:{deleteCart:function(){var t=this;this.$emit("set-loading",!0),this.axios.delete(this.apiInfo.forEntireCart).then((function(){t.$emit("refresh-cart"),t.hideSelf(),t.$router.push("/products")})).catch((function(a){t.$emit("set-loading",!1),console.log(a)}))},hideSelf:function(){$("#cartRemoverModal").modal("hide")}}},c=o,l=e("2877"),d=Object(l["a"])(c,r,s,!1,null,null,null),u=d.exports,f={components:{cartRemover:u},data:function(){return{apiInfo:{forCart:"/ec/shopping"},cart:[],isLoading:!1,isFullPageLoading:!0,pagination:{}}},computed:{priceSummary:function(){return this.cart.reduce((function(t,a){return t+a.product.price*a.quantity}),0)}},mounted:function(){this.getCart()},methods:{givePage:function(t){return t||(this.pagination.current_page||1)},getCart:function(t){var a=this;this.isLoading=!0,this.axios.get("".concat(this.apiInfo.forCart,"?page=").concat(this.givePage(t))).then((function(t){a.cart=t.data.data,a.pagination=t.data.meta.pagination,a.isLoading=!1})).catch((function(t){a.isLoading=!1,console.log(t)}))},editItemAmount:function(t){var a=this;this.isLoading=!0,this.axios.patch(this.apiInfo.forCart,{product:t.product.id,quantity:t.quantity}).then((function(){a.isLoading=!1,a.getCart()})).catch((function(t){a.isLoading=!1,console.log(t)}))},deleteItem:function(t){var a=this;this.isLoading=!0,this.axios.delete("".concat(this.apiInfo.forCart,"/").concat(t.product.id)).then((function(){a.isLoading=!1,a.getCart()})).catch((function(t){a.isLoading=!1,console.log(t)}))},openDeleteCartModal:function(){$("#cartRemoverModal").modal("show")},setLoading:function(t){this.isLoading=t}}},h=f,g=Object(l["a"])(h,i,n,!1,null,null,null);a["default"]=g.exports},d58f:function(t,a,e){var i=e("1c0b"),n=e("7b0b"),r=e("44ad"),s=e("50c4"),o=function(t){return function(a,e,o,c){i(e);var l=n(a),d=r(l),u=s(l.length),f=t?u-1:0,h=t?-1:1;if(o<2)while(1){if(f in d){c=d[f],f+=h;break}if(f+=h,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=h)f in d&&(c=e(c,d[f],f,l));return c}};t.exports={left:o(!1),right:o(!0)}}}]);
//# sourceMappingURL=chunk-fda74d5a.96841903.js.map